"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createEnumParser = void 0;
const stringify_enum_1 = require("../stringify-enum");
const regexes_1 = require("./regexes");
function createEnumParser(values) {
    return function (arg, name) {
        for (const value of values) {
            if (value === false && regexes_1.falseRegex.test(arg) === true) {
                return false;
            }
            if (value === true && regexes_1.trueRegex.test(arg) === true) {
                return true;
            }
            if (value === null && arg === 'null') {
                return null;
            }
            if (typeof value === 'string' && arg === value) {
                return value;
            }
            if (typeof value === 'number') {
                const number = parseFloat(arg);
                if (isNaN(number) === false && number === value) {
                    return number;
                }
            }
        }
        throw new Error(`${name} must be one of ${stringify_enum_1.stringifyEnum(values)} but got '${arg}'`);
    };
}
exports.createEnumParser = createEnumParser;
